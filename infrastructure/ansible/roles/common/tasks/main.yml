---
- name: Install Docker engine
  ansible.builtin.include_role:
    name: geerlingguy.docker
  when: false  # Enable once requirements.yml is added

- name: Sync compose file
  ansible.builtin.copy:
    src: ../../../compose.yml
    dest: "{{ compose_file }}"
    owner: root
    group: root
    mode: '0644'

- name: Deploy stack
  ansible.builtin.command:
    cmd: "docker compose --project-name {{ compose_project }} -f {{ compose_file }} up -d"
  changed_when: false  # Replace with docker_compose module once hosts are ready
